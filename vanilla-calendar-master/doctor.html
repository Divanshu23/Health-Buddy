<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Schedule</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="src/css/vanilla-calendar.css">
        <script src="src/js/vanilla-calendar.js"></script>
    </head>
    <body>
        <div class="content">

            <div class="area-buttons">
                <button class="info" name="availableDates">Set available dates</button>
            </div>
            <div id="myCalendar" class="vanilla-calendar" style="margin-bottom: 20px"></div>
            
            
        <script>
            let pastDates = true, availableDates = false, availableWeekDays = false
            
            let calendar = new VanillaCalendar({
                selector: "#myCalendar",
                months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                shortWeekday: ['Sun', 'Mon', 'Tues', 'Wed', 'Thur', 'Fri', 'Sat'],
                onSelect: (data, elem) => {
                    console.log(data, elem)
                }
            })
            
    
            let btnAvailableDates = document.querySelector('[name=availableDates]')
            btnAvailableDates.addEventListener('click', () => {
                availableDates = !availableDates
                btnAvailableDates.innerText = `${(availableDates ? 'Clear available dates' : 'Set available dates')}`
                if (!availableDates) {
                    calendar.set({availableDates: [], datesFilter: false})
                    return
                }
                let dates = () => {
                    let result = []
                    // users can register 60 day ahead
                    for (let i = 0; i < 60; ++i) {
                        let date = new Date(new Date().getTime() + (60 * 60 * 24 * 1000) * i)
                        result.push({date: `${String(date.getFullYear())}-${String(date.getMonth() + 1).padStart(2, 0)}-${String(date.getDate()).padStart(2, 0)}`})
                    }
                    return result
                }
                calendar.set({availableDates: dates(), availableWeekDays: [], datesFilter: true})
            })
  
        </script>
    </body>
</html>
